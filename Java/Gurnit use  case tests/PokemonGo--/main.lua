this = {}; _fn = {}   -- This file was generated by Code12 from "GottaCatchEmAll.java"
package.path = package.path .. ';../../Desktop/Code12/?.lua;../../../Desktop/Code12/?.lua'
require('Code12.api')
    
    this.pokeball = nil; this.arena = nil; this.eevee = nil; this.charmander = nil; this.charm = nil; this.charizard = nil; this.mewtwo = nil; this.gastly = nil; this.bar = nil; this.powerBar = nil; this.powerText = nil; this.evolve = nil; this.evolveText = nil; 
    this.count = 0
    
        
        
    
    function _fn.start()
        
        -- Game instructions 
        ct.setScreen("instructions")
        ct.setBackImage("arena.png")
        ct.text("Instructions (Press i to go back) ", 50, 5, 5, "white")
        ct.line(5, 8, 95, 8, "white")
        ct.text("Drag the pokeball to capture the pokemon. ", 50, 20, 5, "white")
        ct.text("Catch Mewtwo and power up 2X faster! ", 50, 25, 5, "white")
        ct.text("Once you power up then you can evolve charmander. ", 50, 30, 5, "white")
        ct.text("And watch out for Gastly, he'll drain your power. ", 50, 35, 5, "white")
        ct.text("", 50, 40, 5, "white")
        
        --evolve screen
        ct.setScreen("evolve")
        ct.setBackImage("arena.png")
        this.evolve = ct.rect(50, 50, 50, 30, "yellow")
        this.evolve.clickable = true
        this.evolveText = ct.text("EVOLVE!", 50, 50, 10, "white")
        
        --game screen
        ct.setScreen("start")
        ct.setBackImage("arena.png")
        ct.text("Press i for instructions", 85, 90, 3, "white")
        this.pokeball = ct.image("pokeball.png", 10, 50, 40)
        this.charmander = ct.image("char.png", 95, 10, 15)
        this.charmander.xSpeed = -2
        this.eevee = ct.image("eevee.png", 95, 60, 15)
        this.eevee.xSpeed = -1
        this.mewtwo = ct.image("mewtwo.png", 95, 70, 15)
        this.mewtwo.xSpeed = -1
        this.gastly = ct.image("gastly.png", 95, 90, 20)
        this.gastly.xSpeed = -2
        
        --power up bar
        this.bar = ct.rect(80, 20, 30, 2, "white")
        this.powerBar = ct.rect(65, 20, 0.1, 2, "green")
        this.powerBar:align("left")
        this.powerText = ct.text("POWER UP", 85, 15, 5, "black")
    end
    function _fn.update()
        
        if this.charmander.x < 10 then
            
            this.charmander.visible = true
            this.charmander.x = 100
            this.charmander.y = ct.random(20, 95)
            this.charmander.ySpeed = ct.random(-1, 0)
        end
        if this.eevee.x < 10 then
            
            this.eevee.visible = true
            this.eevee.x = 100
            this.eevee.y = ct.random(20, 95)
            this.eevee.ySpeed = ct.random(-1, 0)
        end
        if this.mewtwo.x < 10 then
            
            this.mewtwo.visible = true
            this.mewtwo.x = ct.random(95, 100)
            this.mewtwo.y = ct.random(30, 95)
            this.mewtwo.ySpeed = ct.random(-3, -2)
        end
        if this.gastly.x < 10 then
            
            this.gastly.visible = true
            this.gastly.x = 135
            this.gastly.y = ct.random(20, 95)
            this.gastly.xSpeed = ct.random(-3, -2)
        end
        -- "catching" the pokemon 
        if this.pokeball:hit(this.charmander) and this.powerBar.width <= 30 then
            
            ct.println("charmander")
            this.charmander.visible = false
            this.powerBar.width = this.powerBar.width + (0.1)
        end
        if this.pokeball:hit(this.eevee) and this.powerBar.width <= 30 then
            
            ct.println("eevee")
            this.eevee.visible = false
            this.powerBar.width = this.powerBar.width + (0.1)
        end
        if this.pokeball:hit(this.mewtwo) and this.powerBar.width <= 30 then
            
            ct.println("eevee")
            this.mewtwo.visible = false
            this.powerBar.width = this.powerBar.width + (0.5)
        end
        -- hitting gastly        
        if this.pokeball:hit(this.gastly) then
            
            this.powerBar.width = this.powerBar.width - (0.5)
            ct.println("gastly")
        end
        --switches screen to show instructions
        if ct.charTyped("i") then
            
            ct.setScreen("instructions")
            this.count = this.count + 1
        end
        --press i again to switch back to game screen       
        if ct.charTyped("i") and this.count % 2 == 0 then
            ct.setScreen("start"); end
        --evolve Charmander when fully powered up
        if this.powerBar.width >= 30 then
            
            ct.setScreen("evolve")
        end
        if this.evolve:clicked() then
            
            this.evolve.visible = false
            this.evolveText.visible = false
            this.charm = ct.image("char.png", 50, 50, 50)
            this.charm.xSpeed = -3
            if this.charm.x <= 5 then
                this.charizard = ct.image("charizard.png", 50, 50, 50); end
        end
        --        if(ct.random(1, 200) == 1)
        --        {
        --          double x = ct.random(90, 100);
        --          double y = ct.random(1,100);
        --          charmander = ct.image("char.png", x, y, 15); 
        --          charmander.xSpeed = -0.5;                  
        --        }
        --random attack by Gastly
        --        if(ct.random(1, 100) == 1 && ct.getScreen().equals("start"))
        --        {        
        --          double x = ct.random(90, 100);
        --          double y = ct.random(1,100);
        --          gastly = ct.image("gastly.png", x, y, 20); 
        --          gastly.xSpeed = -1;
        --        }
        --        if(pokeball.hit(gastly))
        --        {
        --          powerBar.width -= 1;
        --        }
        --        if((pokeball.hit(charmander))
        --          System.out.println("test");
    end
    function _fn.onMouseDrag(obj, x, y)
        
        this.pokeball.x = x
        this.pokeball.y = y
    end
    
