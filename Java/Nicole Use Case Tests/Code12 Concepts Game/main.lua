this = {}; _fn = {}   -- This file was generated by Code12 from "FroggerLevel8.java"
package.path = package.path .. ';../../Desktop/Code12/?.lua;../../../Desktop/Code12/?.lua'
require('Code12.api')
    
    -- Global variables
    this.frogSpeed = 0.25
    this.truckSpeed = 0.80
    this.carSpeed = 0.5
    this.startTime = 30
    this.initLives = 3
    
    -- Groups
    this.trucks = "trucks"
    this.cars = "cars"
    this.lives = "lives"
    
    this.frog = nil; 
    this.deadFrog = nil; 
    this.truck1 = nil; 
    this.truck2 = nil; 
    this.car1 = nil; 
    this.car2 = nil; 
    this.car3 = nil; 
    this.car4 = nil; 
    this.car5 = nil; 
    this.life1 = nil; 
    this.life2 = nil; 
    this.life3 = nil; 
    
    this.countLives = 0
    this.hitSomething = false; 
    
    
        
        
    
    
    function _fn.start()
        
        -- Initial setup
        ct.setTitle("Frogger")
        ct.setBackColor("black")
        ct.showAlert("Welcome to frogger!")
        
        local width = ct.getWidth()
        local halfWidth = width / 2
        
        -- Goal zone
        ct.rect(50, 10, 100, 20, "dark green")
        
        -- Timer
        ct.text("Time left: "..tostring(this.startTime), 10, 5, 4)
        
        -- Life count
        ct.text("Life:", 80, 5, 4)
        this.life1 = ct.image("fly.png", 87, 5, 5)
        this.life2 = ct.image("fly.png", 92, 5, 5)
        this.life3 = ct.image("fly.png", 97, 5, 5)
        this.life1.group = this.lives
        this.life2.group = this.lives
        this.life3.group = this.lives
        
        -- Road
        ct.rect(halfWidth, 20, width, 10, "black")
        ct.rect(halfWidth, 20, width, 10, "black")
        ct.rect(halfWidth, 25, width, 1, "white")
        ct.rect(halfWidth, 30, width, 10, "black")
        ct.rect(halfWidth, 35, width, 1, "white")
        ct.rect(halfWidth, 40, width, 10, "black")
        ct.rect(halfWidth, 45, width, 1, "white")
        ct.rect(halfWidth, 50, width, 10, "black")
        ct.rect(halfWidth, 55, width, 1, "white")
        ct.rect(halfWidth, 60, width, 10, "black")
        ct.rect(halfWidth, 65, width, 1, "white")
        ct.rect(halfWidth, 70, width, 10, "black")
        ct.rect(halfWidth, 75, width, 1, "white")
        ct.rect(halfWidth, 80, width, 10, "black")
        
        -- Starting zone
        ct.rect(50, 95, 100, 20, "dark green")
        
        
        
        this.frog = ct.image("frog1.png", 50, 95, 6)
        local frogpos1 = ct.image("frogpos1.png", 50, 95, 6)
        frogpos1.visible = false
        local frogpos2 = ct.image("frogpos2.png", 50, 95, 6)
        frogpos2.visible = false
        local frogpos3 = ct.image("frogpos3.png", 50, 95, 6)
        frogpos3.visible = false
        local frogpos4 = ct.image("frogpos4.png", 50, 95, 6)
        frogpos4.visible = false
        
        -- Vehicle images
        this.truck1 = ct.image("truck1.png", 70, 20, 20)
        this.truck2 = ct.image("truck2.png", 15, 50, 30)
        this.truck1.group = this.trucks
        this.truck2.group = this.trucks
        this.car1 = ct.image("car2.png", 20, 30, 15)
        this.car2 = ct.image("car1.png", 40, 40, 15)
        this.car3 = ct.image("car3.png", 80, 60, 15)
        this.car4 = ct.image("car1back.png", 20, 70, 15)
        this.car5 = ct.image("car2back.png", 55, 80, 15)
        this.car1.group = this.cars
        this.car2.group = this.cars
        this.car3.group = this.cars
        this.car4.group = this.cars
        this.car5.group = this.cars
        
        this.truck1.xSpeed = this.truckSpeed
        this.truck2.xSpeed = this.truckSpeed
        this.car1.xSpeed = this.carSpeed
        this.car2.xSpeed = this.carSpeed
        this.car3.xSpeed = this.carSpeed
        this.car4.xSpeed = this.carSpeed
        this.car5.xSpeed = this.carSpeed
        
    end
    
    function _fn.update()
        
        local width = ct.getWidth()
        
        if this.truck1.x > width + 2 then
            this.truck1.x = 0; end
        if this.truck2.x > width then
            this.truck2.x = 0; end
        if this.car1.x > width then
            this.car1.x = 0; end
        if this.car2.x > width then
            this.car2.x = 0; end
        if this.car3.x > width then
            this.car3.x = 0; end
        if this.car4.x > width then
            this.car4.x = 0; end
        if this.car5.x > width then
            this.car5.x = 0; end
        
        
        
        if ct.keyPressed("up") then
            
            this.frog.y = this.frog.y - (this.frogSpeed)
        end
        
        
        if ct.keyPressed("down") then
            
            this.frog.y = this.frog.y + (this.frogSpeed)
        end
        
        if ct.keyPressed("left") then
            
            this.frog.x = this.frog.x - (this.frogSpeed)
        end
        
        if ct.keyPressed("right") then
            
            this.frog.x = this.frog.x + (this.frogSpeed)
        end
        
        if this.frog:objectHitInGroup(this.trucks) == this.truck1 or this.frog:objectHitInGroup(this.trucks) == this.truck2 and this.frog.visible == true then
            
            this.frog.visible = false
            this.deadFrog = ct.image("dead.png", this.frog.x, this.frog.y, this.frog.width)
            this.countLives = this.countLives + (1)
            this.hitSomething = true
        end
        
        if this.frog:hit(this.car1) == true or this.frog:hit(this.car2) == true or this.frog:hit(this.car3) == true or this.frog:hit(this.car4) == true or this.frog:hit(this.car5) == true then
            
            this.frog.visible = false
            this.deadFrog = ct.image("dead.png", this.frog.x, this.frog.y, this.frog.width)
            this.countLives = this.countLives + (1)
            this.hitSomething = true
            
        end
        
        -- Leave a skull at the place the frog hit a car/truck
        if this.hitSomething == true then
            
            this.frog.x = 50
            this.frog.y = 95
            this.frog.visible = true
            this.hitSomething = false
        end
        
        if this.countLives == 1 then
            this.life3.visible = false; 
        elseif this.countLives == 2 then
            this.life2.visible = false; 
        elseif this.countLives == 3 then
            this.life1.visible = false; end
        
        
        if this.countLives == 3 then
            
            this.frog.visible = false
            ct.text("Game Over", 50, 50, 10, "red")
        end
        
    end
    

